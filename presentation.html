<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydrogen Simulation - Presentation</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-yellow: #d29922;
            --accent-purple: #a371f7;
            --accent-red: #f85149;
            --accent-orange: #db6d28;
            --border: #30363d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: 2rem 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        h2 {
            color: var(--accent-blue);
            font-size: 1.6rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        h3 {
            color: var(--accent-green);
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem;
        }

        h4 {
            color: var(--accent-yellow);
            font-size: 1rem;
            margin: 0.75rem 0 0.5rem;
        }

        p {
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        .section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }

        .code-block {
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.75rem 0;
            overflow-x: auto;
            border: 1px solid var(--border);
            font-size: 0.85rem;
        }

        .code-block pre {
            font-family: 'Fira Code', 'Consolas', monospace;
            line-height: 1.4;
        }

        .code-block .comment { color: var(--text-secondary); }
        .code-block .keyword { color: var(--accent-purple); }
        .code-block .string { color: var(--accent-green); }
        .code-block .number { color: var(--accent-orange); }
        .code-block .function { color: var(--accent-blue); }

        .diagram {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
            border: 1px solid var(--border);
        }

        .diagram pre {
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.8rem;
            line-height: 1.3;
            display: inline-block;
            text-align: left;
        }

        .flow-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
        }

        .flow-box {
            background: var(--bg-primary);
            border: 2px solid var(--accent-blue);
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            min-width: 160px;
            text-align: center;
            font-size: 0.9rem;
        }

        .flow-box.producer { border-color: var(--accent-yellow); }
        .flow-box.converter { border-color: var(--accent-purple); }
        .flow-box.consumer { border-color: var(--accent-green); }
        .flow-box.storage { border-color: var(--accent-blue); }

        .flow-arrow {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .equation {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.75rem 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            border-left: 4px solid var(--accent-purple);
        }

        .equation .label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 0.75rem 0;
            font-size: 0.9rem;
        }

        th, td {
            padding: 0.5rem 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-tertiary);
            color: var(--accent-blue);
            font-weight: 600;
        }

        .badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-blue { background: rgba(88, 166, 255, 0.2); color: var(--accent-blue); }
        .badge-green { background: rgba(63, 185, 80, 0.2); color: var(--accent-green); }
        .badge-yellow { background: rgba(210, 153, 34, 0.2); color: var(--accent-yellow); }
        .badge-purple { background: rgba(163, 113, 247, 0.2); color: var(--accent-purple); }
        .badge-orange { background: rgba(219, 109, 40, 0.2); color: var(--accent-orange); }

        ul {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.3rem;
        }

        .highlight {
            background: rgba(88, 166, 255, 0.1);
            border-left: 3px solid var(--accent-blue);
            padding: 0.75rem;
            margin: 0.75rem 0;
            border-radius: 0 8px 8px 0;
            font-size: 0.95rem;
        }

        .key-point {
            background: rgba(63, 185, 80, 0.1);
            border-left: 3px solid var(--accent-green);
            padding: 0.75rem;
            margin: 0.75rem 0;
            border-radius: 0 8px 8px 0;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
            margin: 0.75rem 0;
        }

        .tech-card {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--border);
        }

        .tech-card h4 {
            margin: 0 0 0.25rem 0;
            font-size: 0.9rem;
        }

        .tech-card p {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin: 0;
        }

        footer {
            text-align: center;
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            margin-top: 2rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .two-col { grid-template-columns: 1fr; }
            .tech-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .demo-placeholder {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-primary));
            border: 2px dashed var(--accent-purple);
            border-radius: 12px;
            padding: 3rem;
            text-align: center;
            margin: 1rem 0;
        }

        .demo-placeholder h3 {
            color: var(--accent-purple);
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Hydrogen Simulation System</h1>
            <p class="subtitle">Welfare-Maximizing Energy System Optimization</p>
        </header>

        <!-- Introduction -->
        <section class="section">
            <h2>Project Goal</h2>
            <p>This project aims to visualize correlations in hydrogen and electricity grids, and to understand:</p>
            <ul>
                <li>Hydrogen and electricity <strong>prices</strong></li>
                <li>Energy <strong>distribution</strong> patterns</li>
                <li>Implications for <strong>German hydrogen policy</strong></li>
            </ul>
        </section>

        <!-- Section 1: Problem & Solution -->
        <section class="section">
            <h2>1. The Problem</h2>
            <div class="two-col">
                <div>
                    <h3>Data Access Challenge</h3>
                    <ul>
                        <li>H2/electricity data = <strong>critical infrastructure</strong></li>
                        <li>Pricing structures often proprietary</li>
                        <li>No open datasets for learning</li>
                    </ul>
                </div>
                <div>
                    <h3>Our Solution</h3>
                    <ul>
                        <li>Build configurable simulation</li>
                        <li>Generate economically rational data</li>
                        <li>Full parameter transparency</li>
                    </ul>
                </div>
            </div>
            <div class="key-point">
                <strong>Core Idea:</strong> Easiest to learn new tools with predictable, easily modifiable data. That's why I created my own data source.
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="section">
            <h2>2. System Architecture</h2>
            <div class="diagram">
                <pre>
+------------------+     +------------------+
|   Web Browser    |     |  Flask Server    |
|  (controller.html|<--->|  (controller.py) |
+------------------+     +------------------+
                                 |
                                 v
                         +------------------+
                         |   oemof.solph    |
                         |  + HiGHS solver  |
                         +------------------+
                </pre>
            </div>

            <h3>Tech Stack</h3>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>oemof.solph</h4>
                    <p>Energy system modeling</p>
                </div>
                <div class="tech-card">
                    <h4>HiGHS</h4>
                    <p>LP solver</p>
                </div>
                <div class="tech-card">
                    <h4>Flask</h4>
                    <p>REST API</p>
                </div>
                <div class="tech-card">
                    <h4>NetworkX</h4>
                    <p>Graph topology</p>
                </div>
                <div class="tech-card">
                    <h4>Pyomo</h4>
                    <p>Optimization backend</p>
                </div>
            </div>
        </section>

        <!-- Section 3: Network Structure -->
        <section class="section">
            <h2>3. Network Structure</h2>
            <div class="diagram">
                <div class="flow-diagram">
                    <div class="flow-box producer">
                        <strong>Alpha</strong> - Solar Generator<br>
                        <small>100 kW, 8 ct/kWh</small>
                    </div>
                    <div class="flow-arrow">electricity</div>
                    <div style="display: flex; gap: 2rem; flex-wrap: wrap; justify-content: center;">
                        <div>
                            <div class="flow-box converter">
                                <strong>Bravo</strong> - Electrolyzer<br>
                                <small>50 kW, 70% eff</small>
                            </div>
                            <div class="flow-arrow">hydrogen</div>
                            <div style="display: flex; gap: 1rem;">
                                <div class="flow-box consumer">
                                    <strong>Charlie</strong><br>
                                    <small>H2 consumer</small>
                                </div>
                                <div class="flow-box consumer">
                                    <strong>Echo</strong><br>
                                    <small>H2 + Elec</small>
                                </div>
                            </div>
                        </div>
                        <div class="flow-box consumer">
                            <strong>Delta</strong><br>
                            <small>Elec consumer</small>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Node Types</h3>
            <table>
                <tr>
                    <th>Type</th>
                    <th>Role</th>
                    <th>Key Params</th>
                </tr>
                <tr>
                    <td><span class="badge badge-yellow">Generator</span></td>
                    <td>Produces electricity</td>
                    <td>capacity, cost, profile</td>
                </tr>
                <tr>
                    <td><span class="badge badge-purple">Transformer</span></td>
                    <td>Elec → H2 conversion</td>
                    <td>capacity, efficiency, cost</td>
                </tr>
                <tr>
                    <td><span class="badge badge-green">Consumer</span></td>
                    <td>Demands energy</td>
                    <td>utility function params</td>
                </tr>
                <tr>
                    <td><span class="badge badge-blue">Storage</span></td>
                    <td>Battery / H2 tank</td>
                    <td>capacity, charge/discharge rates</td>
                </tr>
            </table>
        </section>

        <!-- Section 4: Economic Model -->
        <section class="section">
            <h2>4. Economic Model</h2>

            <h3>Objective: Maximize Welfare</h3>
            <div class="equation">
                maximize: &Sigma; (Consumer Utility) - &Sigma; (Production Costs)
            </div>

            <div class="two-col">
                <div>
                    <h4>Costs (positive)</h4>
                    <ul>
                        <li>Alpha production: 8 ct/kWh</li>
                        <li>Bravo transformation: 1.5 ct/kWh</li>
                        <li>Grid backup: 15 ct/kWh</li>
                    </ul>
                </div>
                <div>
                    <h4>Utility (negative cost)</h4>
                    <ul>
                        <li>Consumer willingness-to-pay</li>
                        <li>Modeled as negative cost in LP</li>
                        <li>Diminishing marginal utility</li>
                    </ul>
                </div>
            </div>

            <div class="code-block">
<pre><span class="comment"># In oemof: minimize costs (negative utility = benefit)</span>
Flow(variable_costs=<span class="number">8.0</span>)    <span class="comment"># Producer: +8 ct/kWh cost</span>
Flow(variable_costs=<span class="number">-25.0</span>)  <span class="comment"># Consumer: -25 ct = 25 ct utility</span></pre>
            </div>
        </section>

        <!-- Section 5: Utility & Tranches -->
        <section class="section">
            <h2>5. Utility Functions & Tranches</h2>

            <div class="two-col">
                <div>
                    <h3>Logarithmic Utility</h3>
                    <div class="equation">
                        U(x) = scale × ln(1 + x/shape)
                        <div class="label">Single carrier (elec OR H2)</div>
                    </div>
                </div>
                <div>
                    <h3>Cobb-Douglas Utility</h3>
                    <div class="equation">
                        U(h,e) = A × h<sup>α</sup> × e<sup>β</sup>
                        <div class="label">Fixed bundles (H2 + elec)</div>
                    </div>
                </div>
            </div>

            <h3>Tranche Discretization</h3>
            <p>Continuous utility → discrete tranches for LP:</p>
            <table>
                <tr>
                    <th>Tranche</th>
                    <th>Charlie (H2)</th>
                    <th>Delta (Elec)</th>
                    <th>Echo (Bundles)</th>
                </tr>
                <tr>
                    <td>1st</td>
                    <td>5 kg @ 25 ct</td>
                    <td>10 kWh @ 20 ct</td>
                    <td>3 bndl @ 18 ct</td>
                </tr>
                <tr>
                    <td>2nd</td>
                    <td>5 kg @ 18 ct</td>
                    <td>10 kWh @ 14 ct</td>
                    <td>3 bndl @ 12 ct</td>
                </tr>
                <tr>
                    <td>3rd</td>
                    <td>5 kg @ 12 ct</td>
                    <td>10 kWh @ 10 ct</td>
                    <td>3 bndl @ 8 ct</td>
                </tr>
            </table>

            <div class="highlight">
                <strong>Key Insight:</strong> H2 marginal cost = (8 + 1.5) / 0.7 = <strong>13.57 ct/kg</strong><br>
                Only tranches with WTP > 13.57 ct/kg will be consumed!
            </div>
        </section>

        <!-- Section 6: Optimization -->
        <section class="section">
            <h2>6. Optimization Process</h2>

            <div class="diagram">
                <pre>
Node Registry → Build oemof Model → Solve LP (HiGHS) → Extract Results
     JSON           Pyomo/oemof        Simplex          Flows, Welfare
                </pre>
            </div>

            <div class="code-block">
<pre><span class="comment"># Simplified LP formulation</span>
<span class="keyword">minimize:</span> <span class="number">8</span>×x_alpha + <span class="number">1.5</span>×x_bravo - <span class="number">25</span>×x_charlie_T1 - <span class="number">18</span>×x_charlie_T2 ...

<span class="keyword">subject to:</span>
  x_bravo_out = <span class="number">0.7</span> × x_bravo_in     <span class="comment"># Efficiency</span>
  x_alpha ≤ <span class="number">100</span> × profile[t]         <span class="comment"># Solar availability</span>
  x_charlie_Ti ≤ tranche_size        <span class="comment"># Tranche limits</span>
  Σ inflows = Σ outflows             <span class="comment"># Bus balance</span></pre>
            </div>
        </section>

        <!-- Section 7: Live Demo -->
        <section class="section">
            <h2>7. Live Demo</h2>
            <div class="demo-placeholder">
                <h3>Live Demonstration</h3>
                <p style="margin-bottom: 1rem;">
                    <a href="http://72.62.35.98" target="_blank" style="color: var(--accent-blue); text-decoration: none; font-weight: 600;">
                        Web Controller @ 72.62.35.98
                    </a>
                </p>
                <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                    <li>1. Configure nodes & parameters</li>
                    <li>2. Run simulation</li>
                    <li>3. View results & tranches</li>
                </ul>
                <p style="margin-top: 1.5rem; font-size: 0.9rem;">
                    <a href="https://github.com/Meymeymey/claude-experiments" target="_blank" style="color: var(--accent-purple); text-decoration: none;">
                        GitHub Repository
                    </a>
                </p>
            </div>
        </section>

        <!-- Section 8: Key Features -->
        <section class="section">
            <h2>8. Key Features</h2>
            <div class="two-col">
                <div>
                    <h3>Dynamic Node Management</h3>
                    <ul>
                        <li>Add/edit/delete nodes via UI</li>
                        <li>Auto-generate connections</li>
                        <li>Preset configurations</li>
                        <li>Position persistence</li>
                    </ul>
                </div>
                <div>
                    <h3>Storage Support</h3>
                    <ul>
                        <li>Battery (electricity)</li>
                        <li>H2 tanks</li>
                        <li>Charge/discharge efficiency</li>
                        <li>Temporal arbitrage</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 9: Future -->
        <section class="section">
            <h2>9. Future Directions</h2>
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>Uncertainty</h4>
                    <p>Stochastic profiles, demand noise</p>
                </div>
                <div class="tech-card">
                    <h4>Geography</h4>
                    <p>Distance costs, map integration</p>
                </div>
                <div class="tech-card">
                    <h4>Real Projects</h4>
                    <p>Actual plant data, industrial demand</p>
                </div>
                <div class="tech-card">
                    <h4>Temporal</h4>
                    <p>Production/consumption timing mismatch</p>
                </div>
                <div class="tech-card">
                    <h4>Price Validation</h4>
                    <p>Validate price building mechanics</p>
                </div>
            </div>

            <h3>Research Questions</h3>
            <table>
                <tr>
                    <th>Question</th>
                    <th>Approach</th>
                </tr>
                <tr>
                    <td>Break-even electricity price for H2?</td>
                    <td>Vary generator cost</td>
                </tr>
                <tr>
                    <td>Battery vs H2 storage value?</td>
                    <td>Compare welfare scenarios</td>
                </tr>
                <tr>
                    <td>Optimal electrolyzer sizing?</td>
                    <td>Sweep capacity parameter</td>
                </tr>
            </table>
        </section>

        <footer>
            <p>Hydrogen Simulation System</p>
            <p>oemof.solph | NetworkX | Flask</p>
        </footer>
    </div>
</body>
</html>
